databaseChangeLog:
  - changeSet:
      id: 011-insert-hotel-amenities
      author: vlad
      comment: "Linking hotels with amenities for testing"
      context: "!prod"
      changes:
        # DoubleTree by Hilton Minsk amenities
        - insert:
            tableName: hotel_amenities
            schemaName: public
            columns:
              - column:
                  name: hotel_id
                  valueComputed: "(SELECT id FROM hotels WHERE name = 'DoubleTree by Hilton Minsk')"
              - column:
                  name: amenity_id
                  valueComputed: "(SELECT id FROM amenities WHERE name = 'Free parking')"
        - insert:
            tableName: hotel_amenities
            schemaName: public
            columns:
              - column:
                  name: hotel_id
                  valueComputed: "(SELECT id FROM hotels WHERE name = 'DoubleTree by Hilton Minsk')"
              - column:
                  name: amenity_id
                  valueComputed: "(SELECT id FROM amenities WHERE name = 'Free WiFi')"
        - insert:
            tableName: hotel_amenities
            schemaName: public
            columns:
              - column:
                  name: hotel_id
                  valueComputed: "(SELECT id FROM hotels WHERE name = 'DoubleTree by Hilton Minsk')"
              - column:
                  name: amenity_id
                  valueComputed: "(SELECT id FROM amenities WHERE name = 'Non-smoking rooms')"
        - insert:
            tableName: hotel_amenities
            schemaName: public
            columns:
              - column:
                  name: hotel_id
                  valueComputed: "(SELECT id FROM hotels WHERE name = 'DoubleTree by Hilton Minsk')"
              - column:
                  name: amenity_id
                  valueComputed: "(SELECT id FROM amenities WHERE name = 'Concierge')"
        - insert:
            tableName: hotel_amenities
            schemaName: public
            columns:
              - column:
                  name: hotel_id
                  valueComputed: "(SELECT id FROM hotels WHERE name = 'DoubleTree by Hilton Minsk')"
              - column:
                  name: amenity_id
                  valueComputed: "(SELECT id FROM amenities WHERE name = 'On-site restaurant')"
        - insert:
            tableName: hotel_amenities
            schemaName: public
            columns:
              - column:
                  name: hotel_id
                  valueComputed: "(SELECT id FROM hotels WHERE name = 'DoubleTree by Hilton Minsk')"
              - column:
                  name: amenity_id
                  valueComputed: "(SELECT id FROM amenities WHERE name = 'Fitness center')"
        - insert:
            tableName: hotel_amenities
            schemaName: public
            columns:
              - column:
                  name: hotel_id
                  valueComputed: "(SELECT id FROM hotels WHERE name = 'DoubleTree by Hilton Minsk')"
              - column:
                  name: amenity_id
                  valueComputed: "(SELECT id FROM amenities WHERE name = 'Room service')"
        - insert:
            tableName: hotel_amenities
            schemaName: public
            columns:
              - column:
                  name: hotel_id
                  valueComputed: "(SELECT id FROM hotels WHERE name = 'DoubleTree by Hilton Minsk')"
              - column:
                  name: amenity_id
                  valueComputed: "(SELECT id FROM amenities WHERE name = 'Business center')"


        # Waldorf Astoria by Hilton Minsk amenities
        - insert:
            tableName: hotel_amenities
            schemaName: public
            columns:
              - column:
                  name: hotel_id
                  valueComputed: "(SELECT id FROM hotels WHERE name = 'Waldorf Astoria by Hilton Minsk')"
              - column:
                  name: amenity_id
                  valueComputed: "(SELECT id FROM amenities WHERE name = 'Free parking')"
        - insert:
            tableName: hotel_amenities
            schemaName: public
            columns:
              - column:
                  name: hotel_id
                  valueComputed: "(SELECT id FROM hotels WHERE name = 'Waldorf Astoria by Hilton Minsk')"
              - column:
                  name: amenity_id
                  valueComputed: "(SELECT id FROM amenities WHERE name = 'Free WiFi')"
        - insert:
            tableName: hotel_amenities
            schemaName: public
            columns:
              - column:
                  name: hotel_id
                  valueComputed: "(SELECT id FROM hotels WHERE name = 'Waldorf Astoria by Hilton Minsk')"
              - column:
                  name: amenity_id
                  valueComputed: "(SELECT id FROM amenities WHERE name = 'Non-smoking rooms')"
        - insert:
            tableName: hotel_amenities
            schemaName: public
            columns:
              - column:
                  name: hotel_id
                  valueComputed: "(SELECT id FROM hotels WHERE name = 'Waldorf Astoria by Hilton Minsk')"
              - column:
                  name: amenity_id
                  valueComputed: "(SELECT id FROM amenities WHERE name = 'Spa')"
        - insert:
            tableName: hotel_amenities
            schemaName: public
            columns:
              - column:
                  name: hotel_id
                  valueComputed: "(SELECT id FROM hotels WHERE name = 'Waldorf Astoria by Hilton Minsk')"
              - column:
                  name: amenity_id
                  valueComputed: "(SELECT id FROM amenities WHERE name = 'Fitness center')"
        - insert:
            tableName: hotel_amenities
            schemaName: public
            columns:
              - column:
                  name: hotel_id
                  valueComputed: "(SELECT id FROM hotels WHERE name = 'Waldorf Astoria by Hilton Minsk')"
              - column:
                  name: amenity_id
                  valueComputed: "(SELECT id FROM amenities WHERE name = 'Pet-friendly rooms')"



        # Hampton by Hilton Minsk amenities
        - insert:
            tableName: hotel_amenities
            schemaName: public
            columns:
              - column:
                  name: hotel_id
                  valueComputed: "(SELECT id FROM hotels WHERE name = 'Hampton by Hilton Minsk')"
              - column:
                  name: amenity_id
                  valueComputed: "(SELECT id FROM amenities WHERE name = 'Free parking')"
        - insert:
            tableName: hotel_amenities
            schemaName: public
            columns:
              - column:
                  name: hotel_id
                  valueComputed: "(SELECT id FROM hotels WHERE name = 'Hampton by Hilton Minsk')"
              - column:
                  name: amenity_id
                  valueComputed: "(SELECT id FROM amenities WHERE name = 'Free WiFi')"
        - insert:
            tableName: hotel_amenities
            schemaName: public
            columns:
              - column:
                  name: hotel_id
                  valueComputed: "(SELECT id FROM hotels WHERE name = 'Hampton by Hilton Minsk')"
              - column:
                  name: amenity_id
                  valueComputed: "(SELECT id FROM amenities WHERE name = 'Non-smoking rooms')"
        - insert:
            tableName: hotel_amenities
            schemaName: public
            columns:
              - column:
                  name: hotel_id
                  valueComputed: "(SELECT id FROM hotels WHERE name = 'Hampton by Hilton Minsk')"
              - column:
                  name: amenity_id
                  valueComputed: "(SELECT id FROM amenities WHERE name = 'Free hot breakfast')"
        - insert:
            tableName: hotel_amenities
            schemaName: public
            columns:
              - column:
                  name: hotel_id
                  valueComputed: "(SELECT id FROM hotels WHERE name = 'Hampton by Hilton Minsk')"
              - column:
                  name: amenity_id
                  valueComputed: "(SELECT id FROM amenities WHERE name = 'Fitness center')"
        - insert:
            tableName: hotel_amenities
            schemaName: public
            columns:
              - column:
                  name: hotel_id
                  valueComputed: "(SELECT id FROM hotels WHERE name = 'Hampton by Hilton Minsk')"
              - column:
                  name: amenity_id
                  valueComputed: "(SELECT id FROM amenities WHERE name = 'Pets not allowed')"
        - insert:
            tableName: hotel_amenities
            schemaName: public
            columns:
              - column:
                  name: hotel_id
                  valueComputed: "(SELECT id FROM hotels WHERE name = 'Hampton by Hilton Minsk')"
              - column:
                  name: amenity_id
                  valueComputed: "(SELECT id FROM amenities WHERE name = 'Business center')"
        - insert:
            tableName: hotel_amenities
            schemaName: public
            columns:
              - column:
                  name: hotel_id
                  valueComputed: "(SELECT id FROM hotels WHERE name = 'Hampton by Hilton Minsk')"
              - column:
                  name: amenity_id
                  valueComputed: "(SELECT id FROM amenities WHERE name = 'Meeting rooms')"
        - insert:
            tableName: hotel_amenities
            schemaName: public
            columns:
              - column:
                  name: hotel_id
                  valueComputed: "(SELECT id FROM hotels WHERE name = 'Hampton by Hilton Minsk')"
              - column:
                  name: amenity_id
                  valueComputed: "(SELECT id FROM amenities WHERE name = 'Cribs')"

        # Marriott Moscow amenities
        - insert:
            tableName: hotel_amenities
            schemaName: public
            columns:
              - column:
                  name: hotel_id
                  valueComputed: "(SELECT id FROM hotels WHERE name = 'Marriott Moscow')"
              - column:
                  name: amenity_id
                  valueComputed: "(SELECT id FROM amenities WHERE name = 'Free WiFi')"
        - insert:
            tableName: hotel_amenities
            schemaName: public
            columns:
              - column:
                  name: hotel_id
                  valueComputed: "(SELECT id FROM hotels WHERE name = 'Marriott Moscow')"
              - column:
                  name: amenity_id
                  valueComputed: "(SELECT id FROM amenities WHERE name = 'Fitness center')"
        - insert:
            tableName: hotel_amenities
            schemaName: public
            columns:
              - column:
                  name: hotel_id
                  valueComputed: "(SELECT id FROM hotels WHERE name = 'Marriott Moscow')"
              - column:
                  name: amenity_id
                  valueComputed: "(SELECT id FROM amenities WHERE name = 'Swimming pool')"
        - insert:
            tableName: hotel_amenities
            schemaName: public
            columns:
              - column:
                  name: hotel_id
                  valueComputed: "(SELECT id FROM hotels WHERE name = 'Marriott Moscow')"
              - column:
                  name: amenity_id
                  valueComputed: "(SELECT id FROM amenities WHERE name = 'Spa')"
        
        # Radisson Blu Istanbul amenities
        - insert:
            tableName: hotel_amenities
            schemaName: public
            columns:
              - column:
                  name: hotel_id
                  valueComputed: "(SELECT id FROM hotels WHERE name = 'Radisson Blu Istanbul')"
              - column:
                  name: amenity_id
                  valueComputed: "(SELECT id FROM amenities WHERE name = 'Free WiFi')"
        - insert:
            tableName: hotel_amenities
            schemaName: public
            columns:
              - column:
                  name: hotel_id
                  valueComputed: "(SELECT id FROM hotels WHERE name = 'Radisson Blu Istanbul')"
              - column:
                  name: amenity_id
                  valueComputed: "(SELECT id FROM amenities WHERE name = 'On-site restaurant')"
        - insert:
            tableName: hotel_amenities
            schemaName: public
            columns:
              - column:
                  name: hotel_id
                  valueComputed: "(SELECT id FROM hotels WHERE name = 'Radisson Blu Istanbul')"
              - column:
                  name: amenity_id
                  valueComputed: "(SELECT id FROM amenities WHERE name = 'Room service')"
      
      rollback:
        - delete:
            tableName: hotel_amenities
            schemaName: public
            where: "hotel_id IN (SELECT id FROM hotels WHERE name IN ('DoubleTree by Hilton Minsk', 'Marriott Moscow', 'Radisson Blu Istanbul'))"
